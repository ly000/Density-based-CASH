%%
%% dbstmpl.sty
%% von Stefan Brecheisen, LFE fuer Datenbanksysteme am
%% Institut fuer Informatik der LMU Muenchen
%%
%% kleine Anpassungen an das aktuelle CD von Marisa Thoma
%%
%% Dieses Latex-Paket definiert sinnvolle Einstellungen und hilfreiche
%% Befehle zum Erstellen der Ausarbeitung einer Diplom- oder Projektarbeit
%% an der LFE fuer Datenbanksysteme.
%%
\def\fileversion{v0.1}
\def\filedate{2019/06/21}

\NeedsTeXFormat{LaTeX2e}

\ProvidesPackage{dbstmpl}[\filedate\space\fileversion]
\RequirePackage[utf8]{inputenc}

%%
%% benoetigte Pakete
%%
%% Wenn es englisch sein soll:
\RequirePackage[ngerman,english]{babel}
%% sonst: f√ºr deutsche Arbeiten:
% \RequirePackage[english,ngerman]{babel}
\RequirePackage{ngerman}
\RequirePackage{amsmath,amsthm}
\RequirePackage{amssymb}
\RequirePackage{geometry}
% \RequirePackage[showframe]{geometry}
\RequirePackage{fancyhdr}
\RequirePackage{float}
\RequirePackage[nottoc]{tocbibind}
\RequirePackage{graphicx}
\RequirePackage{array}
\RequirePackage[font=small]{caption}
\RequirePackage{enumitem}
\RequirePackage{titlesec}
\RequirePackage{booktabs}
\RequirePackage{blindtext}

\usepackage{tabularx}

\newcommand{\tabitem}{~~\llap{\tiny\textbullet}~~}

\RequirePackage[stretch=10]{microtype}

% Acronyms in acronymsstyle.sty
% \RequirePackage{acronym}

% Bibliography
% \RequirePackage[square,sort,comma,numbers]{natbib}
\RequirePackage[backend=biber, style=ieee-alphabetic]{biblatex}
\RequirePackage{csquotes}
\addbibresource{dbstmpl.bib}

% Algorithm Package
\RequirePackage[ruled,vlined,linesnumbered]{algorithm2e}
\SetKwRepeat{Do}{do}{while}

% Misc - todonotes
\RequirePackage[colorinlistoftodos,prependcaption,textsize=tiny,disable]{todonotes}
% \RequirePackage[colorinlistoftodos,prependcaption,textsize=tiny]{todonotes}

% Misc - spacing
\RequirePackage{quoting}
\quotingsetup{vskip=0pt, leftmargin=7pt, rightmargin=7pt}

% MAYBE
% \titleformat*{\subsubsection}{\scshape}
% \newcommand{\ssubsection}[1]{%
%   \subsection[#1]{\raggedright\normalfont\scshape #1}}

% Figures
\RequirePackage{subfigure}

\RequirePackage{hyperref}

% Citation commands
\newcommand*{\fullref}[1]{\hyperref[{#1}]{\autoref*{#1} \nameref*{#1}}} 
\newcommand*{\secref}[1]{\hyperref[{#1}]{chapter \nameref*{#1}}}

%%
%% haeufig benutzte Symbole
%%
\newcommand{\N}{\mathbb{N}}    % Menge der natuerlichen Zahlen
\newcommand{\Z}{\mathbb{Z}}    % Menge der ganzen Zahlen
\newcommand{\Q}{\mathbb{Q}}    % Menge der rationalen Zahlen
\newcommand{\R}{\mathbb{R}}    % Menge der reellen Zahlen
\newcommand{\C}{\mathbb{C}}    % Menge der komplexen Zahlen

\newcommand{\D}{\mathcal{D}}    % Data space
\newcommand{\PS}{\mathcal{P}}    % Parameter space

%%
%% Custom citation settings
%%
\DeclareCiteCommand{\citeauthor}
  {\boolfalse{citetracker}%
   \boolfalse{pagetracker}%
   \usebibmacro{prenote}}
  {\ifciteindex
     {\indexnames{labelname}}
     {}%
   \printtext[bibhyperref]{\printnames{labelname}}}
  {\multicitedelim}
  {\usebibmacro{postnote}}

%
% Custom Hyperlink Settings
%
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=black
}


%% custom theorems
\newtheoremstyle{propertystyle}% name of the style to be used
  {\topsep}% measure of space to leave above the theorem. E.g.: 3pt
  {\topsep}% measure of space to leave below the theorem. E.g.: 3pt
  {}% name of font to use in the body of the theorem
  {0pt}% measure of space to indent
  {\scshape}% name of head font itshape
  {.}% punctuation between head and body
  { }% space after theorem head; " " = normal interword space
  {}% Manually specify head
  
\newtheoremstyle{definitionstyle}% name of the style to be used
  {}% measure of space to leave above the theorem. E.g.: 3pt
  {}% measure of space to leave below the theorem. E.g.: 3pt
  {}% name of font to use in the body of the theorem
  {3pt}% measure of space to indent
  {\scshape}% name of head font itshape
  {.\\}% punctuation between head and body
  { }% space after theorem head; " " = normal interword space
  {\thmname{#1}\thmnumber{ #2}.\thmnote{ (#3)}}% Manually specify head

\theoremstyle{propertystyle}
% \newtheorem{property}{Property}
% \newtheorem{thm}{Theorem}[subsection] % reset theorem numbering for each chapter
% % \renewcommand{\thethm}{\arabic{thm}}
% \newtheorem{property}[thm]{Property}
% \newtheorem{defn}[thm]{Definition}
\newtheorem{defn}{Definition}
\newcommand{\defnautorefname}{Definition.}
\newtheorem{property}{Property}[subsection]
\newcommand{\propertyautorefname}{Property.}


% todolistcommands
\newcommand{\insertref}[1]{\todo[color=blue!30]{insert ref #1}}
\newcommand{\crit}[1]{\todo[color=red!70]{check!: #1}}
\newcommand{\todor}[1]{\todo[color=red!70]{#1}}
\newcommand{\todog}[1]{\todo[color=green!70]{#1}}
\newcommand{\todob}[1]{\todo[color=blue!30]{#1}}
\newcommand{\sugg}[1]{\todo[color=blue!30]{suggestion: #1}}


% Seitenraender
\geometry{body={140mm,210mm},footskip=12mm}

% Gestaltung der Kopf- und Fusszeilen
\pagestyle{fancy}
\headheight 14pt
\fancyhf{}
\fancyhead[L]{\small\slshape\leftmark}
\fancyfoot[C]{\thepage}

% subsubsections numerieren und ins Inhaltsverzeichnis aufnehmen
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}

%%
%% Globale Variablen
%%
\newtoks\arbeit             % Art der Arbeit
\newtoks\fach               % Studiengang
\newtoks\titel              % Titel der Arbeit
\newtoks\bearbeiter         % Name des Bearbeiters
\newtoks\betreuer           % Name des Betreuers
\newtoks\aufgabensteller    % Name des Aufgabenstellers
\newtoks\abgabetermin       % Datum der Abgabe
\newtoks\ort                % Wohnort des Bearbeiters

%%
%% Ausgabe des Deckblatts fuer eine Diplom- oder Projektarbeit.
%%
\newcommand{\deckblatt}{
  \begin{titlepage}
  ~
  \vspace{-2cm}
  \begin{center}
   \parbox[t]{145.5mm}{ \includegraphics[width=145.5mm]{kopf} }
  \end{center}
    
  \begin{center}
  
      \vspace{2.5cm}\Large
      \the\arbeit
    
      {\large in \the\fach}

      \vspace{1cm}\huge
      \the\titel

      \vspace{1cm}\large
      \the\bearbeiter

      \vspace{\fill}\normalsize
      \begin{tabular}{ll}
        Supervisor: & \the\aufgabensteller\\
        Advisor:        & \the\betreuer\\
        Submission Date:     & \the\abgabetermin
      \end{tabular}
    
    \end{center}
  
  \end{titlepage}
}

%%
%% Ausgabe der Erklaerung ueber die selbstaendige Anfertigung
%% einer Diplomarbeit
%%
\newcommand{\erklaerung}{
  \begin{titlepage}
    \vspace*{\fill}
    \parindent 0cm
    \begin{center}
    %   \textbf{Erkl"arung}
      \textbf{Declaration of Authorship}

      \vspace{1cm}
  
      \begin{minipage}{9.8cm}
        % Hiermit versichere ich, dass ich diese \the\arbeit\ selbst\"andig verfasst und keine anderen als die angegebenen Quellen und Hilfsmittel verwendet habe.
        % I confirm that this \the\arbeit\ is my own work and I have documented all sources and material used.
        I hereby declare that the \the\arbeit\ submitted is my own unaided work. All direct or indirect sources used are acknowledged as references. 

        \vspace{1cm}
        \the\ort, \the\abgabetermin

        \vspace{1.5cm}
        \makebox[9.8cm]{\dotfill}\\
        \the\bearbeiter

      \end{minipage}
  
    \end{center}
  
    \vspace*{\fill}
  \end{titlepage}
}

\newcommand{\emptypage}{
\begin{titlepage}
\vspace*{\fill}
\end{titlepage}
}
